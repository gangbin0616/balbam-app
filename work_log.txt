# 작업 로그

## 2026년 2월 8일 일요일

### 1. 프로젝트 초기화
- `C:\balbam-app` 디렉토리 내의 `README.md`를 제외한 모든 파일과 폴더 삭제 완료.

### 2. 프로젝트 재설치 및 의존성 설치
- 임시 디렉토리로 README.md 및 work_log.txt 이동.
- `npx create-expo-app . --template tabs` 명령어로 새 Expo 프로젝트 생성 및 의존성 설치 완료.
- README.md 및 work_log.txt 원위치 복구 완료.

### 3. Google Maps API 키를 위한 .env 파일 설정
- 프로젝트 루트에 `.env` 파일을 생성하고 `EXPO_PUBLIC_GOOGLE_MAPS_API_KEY=YOUR_GOOGLE_MAPS_API_KEY_HERE` 내용을 추가 완료.

### 4. app.json 파일에 react-native-google-maps 플러그인 설정 확인
- `app.json` 파일에 `react-native-google-maps` 플러그인 설정 추가 완료.

### 5. 기본 앱 구조 (expo-router) 생성 및 README.md에 명시된 MVP 기능 구현 시작
- Expo `tabs` 템플릿으로 프로젝트 생성.
- `app` 디렉토리 구조 확인.
- `app/(tabs)/index.tsx`를 홈 화면으로 수정: "발밤" 제목, 소개 텍스트, "경로 검색 화면"으로 이동하는 버튼 추가 완료.
- `react-native-maps` 및 `expo-location` 라이브러리 설치 완료.
- `app/search.tsx` 파일 생성: 출발지/목적지 입력, 검색 버튼, 로딩/에러 표시, 더미 데이터 기반 예상 이동 시간 및 경로 단계 표시, Google Maps 지도 표시 (서울 중심 초기 설정, 더미 데이터 기반 마커 및 Polyline) 구현 완료.
- `app/_layout.tsx` 파일 수정: `search` 스크린을 Stack Navigator에 추가 완료.

### 6. React Native Maps를 사용하여 지도 기반 경로 시각화 구현
- `app/search.tsx` 내에서 `MapView`, `Marker`, `Polyline` 컴포넌트를 사용하여 지도 기반 경로 시각화 구현 완료.

### 7. 앱 세로 모드 실행 확인 및 테스트
- `app.json`에 `"orientation": "portrait"` 설정 확인.
- `npx expo start` 실행 시 `PluginError` 발생 (expo-maps 플러그인 문제).
- `app.json`의 `plugins` 배열에서 `"expo-maps"` 플러그인 제거 및 `android`, `ios` 섹션에 Google Maps API 키 직접 설정.
- `npx expo start` 재실행 시도. (사용자 요청으로 취소됨)
- Expo 개발 서버가 20초 후 중지되는 현상 확인. (근본적인 문제 해결 필요)
- **사용자 확인**: 앱이 세로 모드로 정상 작동함을 확인. (`PluginError` 문제는 해결되었거나 임시적인 문제였던 것으로 판단.)

### 8. UI/UX 재설계 - 지도 SDK 교체 시작
- `react-native-maps` 및 `expo-location` 라이브러리 제거 완료.
- `app.json` 파일에서 Google Maps 관련 설정 (android/ios config 내 apiKey, package/bundleIdentifier) 제거 완료.
- React Native Naver Maps 라이브러리로 `@mj-studio/react-native-naver-map` 선택 완료.
- `NAVER_CLIENT_ID` 및 `NAVER_CLIENT_SECRET` 플레이스홀더를 포함하도록 `.env` 파일 업데이트 완료.
- `@mj-studio/react-native-naver-map` 라이브러리 설치 완료.
- `app.json`에 `@mj-studio/react-native-naver-map` 플러그인과 `naverMapClientId` 추가 완료.
- `app/(tabs)/index.tsx` (홈 화면) 재설계 완료: `NaverMapView` 컴포넌트, 출발지/도착지 입력 필드, 슬라이드업 시트 플레이스홀더 구현. `design.md`의 브랜드 색상을 포함하는 `constants/Colors.ts` 파일 생성/업데이트.
- `app/search.tsx` (경로 검색 결과 화면) 재설계 완료: `NaverMapView` 컴포넌트, 경로 카드 리스트, "내비게이션 시작" 고정 버튼 구현. `useLocalSearchParams`를 사용하여 경로 파라미터 수신. `expo-location` 의존성 제거.
- `react-native-sfsymbols` 및 `expo-haptics` 라이브러리 설치 완료.
- `app/(tabs)/index.tsx`에 SF Symbols 아이콘 및 햅틱 피드백 적용 완료.
- `app/search.tsx`에 햅틱 피드백 적용 완료.
- **Navigation Flow 확인**: 홈 화면에서 검색 화면으로의 이동 및 파라미터 전달 기능 구현 완료. (수동 테스트 필요)

### 9. 오류 해결
- `npx expo start` 실행 시 `[TypeError: Cannot read property 'light' of undefined]` 및 `WARN Route missing default export` 오류 발생 확인.
- **해결 계획**:
    - `constants/Colors.ts` 구조 및 import 확인 (이상 없음).
    - `app/(tabs)/index.tsx` 및 `app/search.tsx`의 default export 확인 (이상 없음).
    - `app/search.tsx` 파일 위치 확인 (이상 없음).
    - Metro 번들러 및 npm 캐시 초기화(`npm cache clean --force`, `npm install`) 권장.
    - 사용자에게 `npx expo start` 재실행 요청.
- **`npm cache clean --force` 실패**: `ENOTEMPTY` 오류 발생.
- **새로운 지침**:
    1. 컴퓨터를 재시작하여 잠긴 파일을 해제합니다.
    2. `C:\Users\admin\AppData\Local\npm-cache\_cacache\tmp` 디렉토리를 수동으로 삭제합니다.
    3. 다시 `npm cache clean --force`를 실행합니다.
    4. `npm install`을 실행하여 모든 의존성을 재설치합니다.
    5. 마지막으로 `npx expo start`를 실행하여 앱을 시작합니다.
- **오류 확인을 위한 임시 코드 변경**:
    - `app/(tabs)/index.tsx`: `Colors` import를 `../../../constants/Colors`로 변경하고, `Colors` 사용을 하드코딩된 값으로 대체, `console.log('Colors in HomeScreen:', Colors);` 추가 완료.
    - `app/search.tsx`: `Colors` import를 `../constants/Colors`로 변경하고, `Colors` 사용을 하드코딩된 값으로 대체, `console.log('Colors in SearchScreen:', Colors);` 추가 완료.
- **`Colors` import 경로 수정**:
    - `app/(tabs)/index.tsx`의 `Colors` import 경로를 `../../../constants/Colors`로 수정 완료.
    - `app/search.tsx`의 `Colors` import 경로를 `../constants/Colors`로 수정 완료.
- **`Colors` import 경로 복원**:
    - `app/(tabs)/index.tsx`의 `Colors` import 경로를 ` '@/constants/Colors';`로 복원 완료.
    - `app/search.tsx`의 `Colors` import 경로를 ` '@/constants/Colors';`로 복원 완료.
- **`Colors` 사용 하드코딩**:
    - `app/(tabs)/index.tsx` 및 `app/search.tsx`에서 모든 `Colors` 사용을 하드코딩된 값으로 대체 완료.

### 10. `tsconfig.json` 오류 해결 시도
- `tsconfig.json`에서 `extends: "expo/tsconfig.base"` 파일을 찾을 수 없다는 오류 발생.
- **해결 계획**: 이 오류는 캐싱/종속성 문제일 가능성이 높으므로, 이전에 제시된 캐시 삭제 및 `npm install` 단계를 다시 시도하여 해결을 모색합니다.
- **사용자에게 재차 강조**: 캐시 삭제 및 `npm install`을 정확하게 수행한 후 `npx expo start`를 실행하여 결과를 보고해 달라고 요청.

### 11. `codegenNativeComponent is not a function` 오류 해결 시도
- `npx expo start` 실행 시 `(0 , _reactNativeWebDistIndex.codegenNativeComponent) is not a function` 오류 발생.
- **원인 분석**: `@mj-studio/react-native-naver-map` 라이브러리가 `react-native-web` 환경에서 지원되지 않는 네이티브 모듈 함수를 호출하기 때문으로 판단. 이 프로젝트는 모바일 앱이므로 웹 빌드 시 해당 오류가 발생해도 무방.
- **해결**:
    - `app/(tabs)/index.tsx` 파일에서 `NaverMapView` 컴포넌트를 `Platform.OS === 'ios' || Platform.OS === 'android'` 검사로 래핑하여 모바일 플랫폼에서만 렌더링하고, 웹에서는 대체 텍스트 ("웹에서는 지도를 사용할 수 없습니다.")를 표시하도록 수정 완료. 관련 스타일 (`mapFallback`, `mapFallbackText`) 추가 완료.
    - `app/search.tsx` 파일에서 `NaverMapView` 컴포넌트를 `Platform.OS === 'ios' || Platform.OS === 'android'` 검사로 래핑하여 모바일 플랫폼에서만 렌더링하고, 웹에서는 대체 텍스트 ("웹에서는 지도를 사용할 수 없습니다.")를 표시하도록 수정 완료. 관련 스타일 (`mapFallback`, `mapFallbackText`) 추가 완료.
- **사용자에게 안내**: 웹 빌드의 제한 사항을 설명하고 테스트는 iOS/Android 모바일 환경에 집중하도록 안내.
- **새로운 오류 발생**: `npx expo start --clear` 타임아웃. (`codegenNativeComponent` 오류는 사라질 것으로 예상되나, 메트로 번들러가 빌드 과정에서 멈춘 것으로 보임)
- **해결**: 사용자에게 캐시 삭제 및 의존성 재설치 과정을 다시 강조하고 `npx expo start` 실행 후 전체 로그 보고 요청.

### 12. Metro Bundler 타임아웃 오류
- `npx expo start --clear` 실행 시 Metro Bundler가 5분 타임아웃 발생, 빌드 완료되지 않음.
- **해결**: 이전 캐시 삭제 및 `npm install` 단계는 성공적으로 완료되었으므로, Metro Bundler가 빌드 프로세스에 시간이 오래 걸리거나 멈춘 것으로 판단.
- **사용자에게 안내**: `npx expo start`를 실행하되, 이번에는 완료될 때까지 또는 명확한 오류가 발생할 때까지 충분한 시간을 줄 것을 요청. 전체 출력을 보고해 달라고 요청.
- **`tsconfig.json` 오류 지속**: 이전 캐시 삭제 및 재설치 시도에도 불구하고 `파일 'expo/tsconfig.base'을(를) 찾을 수 없습니다.` 오류 지속 확인.
- **해결**: 이 오류는 근본적으로 캐싱/종속성 문제이므로, 위에서 강조한 "캐시 삭제 및 `npm install`" 단계를 정확하고 완벽하게 재차 수행하는 것이 유일한 해결책으로 판단. 이 단계가 완료된 후 `npx expo start`를 재실행하여 결과를 보고해 달라고 요청.

## 2026년 2월 9일 월요일

### 13. `TypeError: Cannot convert undefined value to object` 오류 디버깅 (진행 중)
- **문제 발생**: `app/(tabs)/_layout.tsx` (TabLayout)에서 `TypeError: Cannot convert undefined value to object` 오류 발생. `npx expo start --clear` 실행 시 `console.log` 출력이 나타나지 않아 오류 발생 지점 파악에 어려움.
- **1단계: `constants/Colors.ts` 구조 단순화**: `light` 및 `dark` 테마 내에 중복 정의된 `background` 및 `foreground` 객체를 제거하여 `Colors` 객체 구조를 단순화 완료. (2026년 2월 9일)
- **2단계: `useColorScheme.ts` 및 `useClientOnlyValue.ts` 검토**: 해당 파일들이 `undefined` 값을 반환할 가능성이 낮음을 확인 완료. (2026년 2월 9일)
- **3단계: `app/(tabs)/_layout.tsx` 로그 추가**: `TabLayout` 컴포넌트에 `colorScheme` 및 `Colors[colorScheme ?? 'light']` 값을 출력하는 `console.log` 문을 추가 완료. (2026년 2월 9일)
- **4단계: `Colors` 사용 임시 하드코딩**: `Colors` 객체 또는 `useColorScheme` 훅으로 인한 오류를 격리하기 위해 `app/(tabs)/_layout.tsx`의 `tabBarActiveTintColor` 및 `FontAwesome` 컴포넌트 `color` 속성에 사용되는 `Colors` 참조를 임시로 고정된 색상 값(`'blue'`, `'black'`)으로 변경 완료. (2026년 2월 9일)
- **5단계: `app/(tabs)/_layout.tsx` 대폭 단순화**: `Tabs` 컴포넌트 내부를 최소화하여 오류 원인을 격리하기 위해 `Tabs.Screen` 컴포넌트를 하나만 남기고, 해당 스크린의 `options` 속성에서 `tabBarIcon` 및 `headerRight`를 제거하여 최소한의 기능만 남김 완료. (2026년 2월 9일)